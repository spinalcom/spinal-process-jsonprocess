"use strict";

// Generated by CoffeeScript 2.3.1
(function () {
  var G_root;

  require("spinal-core-connectorjs");

  G_root = typeof window === "undefined" ? global : window;

  module.exports = {
    /**
    * [Model] The declaration of the Model
     */
    modelType: G_root.Model,
    /**
    * [String] The constructor name of the Model
     */
    modelName: "Model",
    /**
    * [Number] the defaut handler executed is the one with the highiest priority
     */
    prority: 0,
    /**
    * [Function] The handler itself return a promise with the _json in the resolve
     */
    handler: function handler() {
      var _json, _model, model_key, prom;
      _json = this._json;
      _model = this._model;
      if (!_json.data) {
        _json.data = {};
      }
      for (model_key in _json.data) {
        if (_model._attribute_names.indexOf(model_key)) {
          delete _json.data[model_key];
        }
      }
      prom = function () {
        var i, len, ref, results;
        ref = _model._attribute_names;
        results = [];
        for (i = 0, len = ref.length; i < len; i++) {
          model_key = ref[i];
          results.push(G_root.JsonProcess._assignWithKey.call(this, _json.data, model_key, _model));
        }
        return results;
      }.call(this);
      return Promise.all(prom).then(function (data) {
        return _json;
      });
    }
  };
}).call(undefined);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Nb2RlbEhhbmRsZXIvTW9kZWwuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLENBQUEsWUFBQTtBQUFBLE1BQUEsTUFBQTs7QUFBQSxVQUFBLHlCQUFBOztBQUNBLFdBQVksT0FBQSxNQUFBLEtBQUgsV0FBRyxHQUFILE1BQUcsR0FBOEMsTUFBMUQ7O0FBRUEsU0FBQSxPQUFBLEdBQWlCOzs7O0FBS2YsZUFBVyxPQUxJLEtBQUE7Ozs7QUFVZixlQVZlLE9BQUE7Ozs7QUFlZixhQWZlLENBQUE7Ozs7QUFvQmYsYUFBUyxtQkFBQTtBQUNQLFVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxTQUFBLEVBQUEsSUFBQTtBQUFBLGNBQVEsS0FBQyxLQUFUO0FBQ0EsZUFBUyxLQUFDLE1BQVY7QUFDQSxVQUFvQixDQUFJLE1BQXhCLElBQUEsRUFBQTtBQUFBLGNBQUEsSUFBQSxHQUFBLEVBQUE7O0FBQ0EsV0FBQSxTQUFBLElBQUEsTUFBQSxJQUFBLEVBQUE7QUFDRSxZQUFJLE9BQU8sZ0JBQVAsQ0FBQSxPQUFBLENBQUosU0FBSSxDQUFKLEVBQUE7QUFDRSxpQkFBTyxNQUFNLElBQU4sQ0FEVCxTQUNTLENBQVA7O0FBRko7QUFHQSxhQUFBLFlBQUE7O0FBQU8sY0FBQSxPQUFBLGdCQUFBO0FBQUEsa0JBQUEsRUFBQTtBQUFBLGFBQUEsSUFBQSxDQUFBLEVBQUEsTUFBQSxJQUFBLE1BQUEsRUFBQSxJQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7O3VCQUNMLE9BQU8sV0FBUCxDQUFtQixjQUFuQixDQUFBLElBQUEsQ0FBQSxJQUFBLEVBQTBDLE1BQTFDLElBQUEsRUFBQSxTQUFBLEVBQUEsTUFBQSxDO0FBREs7O09BQVAsQyxJQUFBLEMsSUFBQSxDQUFBO0FBRUEsYUFBTyxRQUFBLEdBQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQSxDQUF1QixVQUFBLElBQUEsRUFBQTtBQUM1QixlQUFPLEtBQVA7QUFESyxPQUFBLENBQVA7QUFUTztBQXBCTSxHQUFqQjtDQUhBLEUsSUFBQSIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoXCJzcGluYWwtY29yZS1jb25uZWN0b3Jqc1wiKVxuR19yb290ID0gaWYgdHlwZW9mIHdpbmRvdyA9PSBcInVuZGVmaW5lZFwiIHRoZW4gZ2xvYmFsIGVsc2Ugd2luZG93XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gICMjIypcbiAgKiBbTW9kZWxdIFRoZSBkZWNsYXJhdGlvbiBvZiB0aGUgTW9kZWxcbiAgIyMjXG4gIG1vZGVsVHlwZTogR19yb290Lk1vZGVsLFxuXG4gICMjIypcbiAgKiBbU3RyaW5nXSBUaGUgY29uc3RydWN0b3IgbmFtZSBvZiB0aGUgTW9kZWxcbiAgIyMjXG4gIG1vZGVsTmFtZTogXCJNb2RlbFwiLFxuXG4gICMjIypcbiAgKiBbTnVtYmVyXSB0aGUgZGVmYXV0IGhhbmRsZXIgZXhlY3V0ZWQgaXMgdGhlIG9uZSB3aXRoIHRoZSBoaWdoaWVzdCBwcmlvcml0eVxuICAjIyNcbiAgcHJvcml0eTogMFxuXG4gICMjIypcbiAgKiBbRnVuY3Rpb25dIFRoZSBoYW5kbGVyIGl0c2VsZiByZXR1cm4gYSBwcm9taXNlIHdpdGggdGhlIF9qc29uIGluIHRoZSByZXNvbHZlXG4gICMjI1xuICBoYW5kbGVyOiAoKSAtPlxuICAgIF9qc29uID0gQF9qc29uXG4gICAgX21vZGVsID0gQF9tb2RlbFxuICAgIF9qc29uLmRhdGEgPSB7fSBpZiAobm90IF9qc29uLmRhdGEpXG4gICAgZm9yIG1vZGVsX2tleSBvZiBfanNvbi5kYXRhXG4gICAgICBpZiAgX21vZGVsLl9hdHRyaWJ1dGVfbmFtZXMuaW5kZXhPZihtb2RlbF9rZXkpXG4gICAgICAgIGRlbGV0ZSBfanNvbi5kYXRhW21vZGVsX2tleV1cbiAgICBwcm9tID0gZm9yIG1vZGVsX2tleSBpbiBfbW9kZWwuX2F0dHJpYnV0ZV9uYW1lc1xuICAgICAgR19yb290Lkpzb25Qcm9jZXNzLl9hc3NpZ25XaXRoS2V5LmNhbGwoQCwgX2pzb24uZGF0YSwgbW9kZWxfa2V5LCBfbW9kZWwpXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb20pLnRoZW4oKGRhdGEpIC0+XG4gICAgICByZXR1cm4gX2pzb24pXG5cbn0iXSwic291cmNlUm9vdCI6Ii4uLy4uIn0=
//# sourceURL=/home/laurent/share_to_send/modules/spinal-process-jsonprocess/src/ModelHandler/Model.coffee