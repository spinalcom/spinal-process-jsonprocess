"use strict";

// Generated by CoffeeScript 2.3.1
(function () {
  var G_root;

  require("spinal-core-connectorjs");

  G_root = typeof window === "undefined" ? global : window;

  module.exports = {
    /**
    * [Model] The declaration of the Model
     */
    modelType: G_root.Lst,
    /**
    * [String] The constructor name of the Model
     */
    modelName: "Lst",
    /**
    * [Number] the defaut handler executed is the one with the highiest priority
     */
    prority: 1,
    /**
    * [Function] The handler itself return a promise with the _json in the resolve
     */
    handler: function handler() {
      var _json, _model, i, len, prom, value;
      _json = this._json;
      _model = this._model;
      if (!_json.data) {
        _json.data = [];
      }
      prom = [];
      i = 0;
      len = _model.length;
      while (i < len) {
        value = _model[i];
        prom.push(G_root.JsonProcess._assignPush.call(this, _json, value));
        i++;
      }
      return Promise.all(prom).then(function (data) {
        return _json;
      });
    },
    /**
    * handler to "update" the max_depth of children
    * Optionnal, if  not definied will use the default one (Model / Lst / Ptr)
     */
    set_children_depth_handler: function set_children_depth_handler(_json, new_max_depth) {
      var child, prom, targetJsonProcess;
      prom = function () {
        var j, len1, ref, results;
        ref = _json.data;
        results = [];
        for (j = 0, len1 = ref.length; j < len1; j++) {
          child = ref[j];
          targetJsonProcess = G_root.JsonProcess._getJsonProcess(child);
          if (targetJsonProcess.max_depth < new_max_depth) {
            targetJsonProcess.max_depth = new_max_depth;
            targetJsonProcess._is_rdy = targetJsonProcess._update();
          }
          results.push(targetJsonProcess._is_rdy);
        }
        return results;
      }();
      return Promise.all(prom).then(function () {
        return process._json;
      });
    }
  };
}).call(undefined);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Nb2RlbEhhbmRsZXIvTHN0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxDQUFBLFlBQUE7QUFBQSxNQUFBLE1BQUE7O0FBQUEsVUFBQSx5QkFBQTs7QUFDQSxXQUFZLE9BQUEsTUFBQSxLQUFILFdBQUcsR0FBSCxNQUFHLEdBQThDLE1BQTFEOztBQUVBLFNBQUEsT0FBQSxHQUFpQjs7OztBQUtmLGVBQVcsT0FMSSxHQUFBOzs7O0FBVWYsZUFWZSxLQUFBOzs7O0FBZWYsYUFmZSxDQUFBOzs7O0FBb0JmLGFBQVMsbUJBQUE7QUFDUCxVQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQTtBQUFBLGNBQVEsS0FBQyxLQUFUO0FBQ0EsZUFBUyxLQUFDLE1BQVY7QUFDQSxVQUFvQixDQUFJLE1BQXhCLElBQUEsRUFBQTtBQUFBLGNBQUEsSUFBQSxHQUFBLEVBQUE7O0FBQ0EsYUFBTyxFQUFQO0FBQ0EsVUFBSSxDQUFKO0FBQ0EsWUFBTSxPQUFPLE1BQWI7QUFDQSxhQUFPLElBQVAsR0FBQSxFQUFBO0FBQ0UsZ0JBQVEsT0FBTyxDQUFQLENBQVI7QUFDQSxhQUFBLElBQUEsQ0FBVSxPQUFPLFdBQVAsQ0FBbUIsV0FBbkIsQ0FBQSxJQUFBLENBQUEsSUFBQSxFQUFBLEtBQUEsRUFBVixLQUFVLENBQVY7QUFDQTtBQUhGO0FBSUEsYUFBTyxRQUFBLEdBQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQSxDQUF3QixVQUFBLElBQUEsRUFBQTtBQUM3QixlQUFPLEtBQVA7QUFESyxPQUFBLENBQVA7QUEvQmEsS0FBQTs7Ozs7QUFzQ2YsZ0NBQTRCLG9DQUFBLEtBQUEsRUFBQSxhQUFBLEVBQUE7QUFDMUIsVUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLGlCQUFBO0FBQUEsYUFBQSxZQUFBOztBQUFPLGNBQUEsTUFBQSxJQUFBO0FBQUEsa0JBQUEsRUFBQTtBQUFBLGFBQUEsSUFBQSxDQUFBLEVBQUEsT0FBQSxJQUFBLE1BQUEsRUFBQSxJQUFBLElBQUEsRUFBQSxHQUFBLEVBQUE7O0FBQ0wsOEJBQW9CLE9BQU8sV0FBUCxDQUFBLGVBQUEsQ0FBQSxLQUFBLENBQXBCO0FBQ0EsY0FBSSxrQkFBQSxTQUFBLEdBQUosYUFBQSxFQUFBO0FBQ0UsOEJBQUEsU0FBQSxHQUE4QixhQUE5QjtBQUNBLDhCQUFBLE9BQUEsR0FBNEIsa0JBRjlCLE9BRThCLEVBQTVCOzt1QkFDRixrQkFBa0IsTztBQUxiOztPQUFQLEVBQUE7QUFPQSxhQUFPLFFBQUEsR0FBQSxDQUFBLElBQUEsRUFBQSxJQUFBLENBQXVCLFlBQUE7QUFDNUIsZUFBTyxRQUFRLEtBQWY7QUFESyxPQUFBLENBQVA7QUFSMEI7QUF0Q2IsR0FBakI7Q0FIQSxFLElBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKFwic3BpbmFsLWNvcmUtY29ubmVjdG9yanNcIilcbkdfcm9vdCA9IGlmIHR5cGVvZiB3aW5kb3cgPT0gXCJ1bmRlZmluZWRcIiB0aGVuIGdsb2JhbCBlbHNlIHdpbmRvd1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICAjIyMqXG4gICogW01vZGVsXSBUaGUgZGVjbGFyYXRpb24gb2YgdGhlIE1vZGVsXG4gICMjI1xuICBtb2RlbFR5cGU6IEdfcm9vdC5Mc3QsXG5cbiAgIyMjKlxuICAqIFtTdHJpbmddIFRoZSBjb25zdHJ1Y3RvciBuYW1lIG9mIHRoZSBNb2RlbFxuICAjIyNcbiAgbW9kZWxOYW1lOiBcIkxzdFwiLFxuXG4gICMjIypcbiAgKiBbTnVtYmVyXSB0aGUgZGVmYXV0IGhhbmRsZXIgZXhlY3V0ZWQgaXMgdGhlIG9uZSB3aXRoIHRoZSBoaWdoaWVzdCBwcmlvcml0eVxuICAjIyNcbiAgcHJvcml0eTogMVxuXG4gICMjIypcbiAgKiBbRnVuY3Rpb25dIFRoZSBoYW5kbGVyIGl0c2VsZiByZXR1cm4gYSBwcm9taXNlIHdpdGggdGhlIF9qc29uIGluIHRoZSByZXNvbHZlXG4gICMjI1xuICBoYW5kbGVyOiAoKSAtPlxuICAgIF9qc29uID0gQF9qc29uXG4gICAgX21vZGVsID0gQF9tb2RlbFxuICAgIF9qc29uLmRhdGEgPSBbXSBpZiAobm90IF9qc29uLmRhdGEpXG4gICAgcHJvbSA9IFtdXG4gICAgaSA9IDBcbiAgICBsZW4gPSBfbW9kZWwubGVuZ3RoXG4gICAgd2hpbGUgKGkgPCBsZW4pXG4gICAgICB2YWx1ZSA9IF9tb2RlbFtpXVxuICAgICAgcHJvbS5wdXNoKEdfcm9vdC5Kc29uUHJvY2Vzcy5fYXNzaWduUHVzaC5jYWxsKEAsIF9qc29uLCB2YWx1ZSkpXG4gICAgICBpKytcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbSkudGhlbiggKGRhdGEpIC0+XG4gICAgICByZXR1cm4gX2pzb24pXG5cbiAgIyMjKlxuICAqIGhhbmRsZXIgdG8gXCJ1cGRhdGVcIiB0aGUgbWF4X2RlcHRoIG9mIGNoaWxkcmVuXG4gICogT3B0aW9ubmFsLCBpZiAgbm90IGRlZmluaWVkIHdpbGwgdXNlIHRoZSBkZWZhdWx0IG9uZSAoTW9kZWwgLyBMc3QgLyBQdHIpXG4gICMjI1xuICBzZXRfY2hpbGRyZW5fZGVwdGhfaGFuZGxlcjogKF9qc29uLCBuZXdfbWF4X2RlcHRoKSAtPlxuICAgIHByb20gPSBmb3IgY2hpbGQgaW4gX2pzb24uZGF0YVxuICAgICAgdGFyZ2V0SnNvblByb2Nlc3MgPSBHX3Jvb3QuSnNvblByb2Nlc3MuX2dldEpzb25Qcm9jZXNzKGNoaWxkKVxuICAgICAgaWYgKHRhcmdldEpzb25Qcm9jZXNzLm1heF9kZXB0aCA8IG5ld19tYXhfZGVwdGgpXG4gICAgICAgIHRhcmdldEpzb25Qcm9jZXNzLm1heF9kZXB0aCA9IG5ld19tYXhfZGVwdGhcbiAgICAgICAgdGFyZ2V0SnNvblByb2Nlc3MuX2lzX3JkeSA9IHRhcmdldEpzb25Qcm9jZXNzLl91cGRhdGUoKVxuICAgICAgdGFyZ2V0SnNvblByb2Nlc3MuX2lzX3JkeVxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb20pLnRoZW4oKCkgLT5cbiAgICAgIHJldHVybiBwcm9jZXNzLl9qc29uXG4gICAgKVxufSJdLCJzb3VyY2VSb290IjoiLi4vLi4ifQ==
//# sourceURL=/home/laurent/share_to_send/modules/spinal-process-jsonprocess/src/ModelHandler/Lst.coffee