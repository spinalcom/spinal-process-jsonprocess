"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Generated by CoffeeScript 2.3.1
(function () {
  // Copyright 2015 SpinalCom - www.spinalcom.com

  // This file is part of SpinalCore.

  // Please read all of the following terms and conditions
  // of the Free Software license Agreement ("Agreement")
  // carefully.

  // This Agreement is a legally binding contract between
  // the Licensee (as defined below) and SpinalCom that
  // sets forth the terms and conditions that govern your
  // use of the Program. By installing and/or using the
  // Program, you agree to abide by all the terms and
  // conditions stated or referenced herein.

  // If you do not agree to abide by these terms and
  // conditions, do not demonstrate your acceptance and do
  // not install or use the Program.

  // You should have received a copy of the license along
  // with this file. If not, see
  // <http://resources.spinalcom.com/licenses.pdf>.
  var G_root;

  G_root = typeof window === "undefined" ? global : window;

  require("spinal-core-connectorjs");

  G_root.JsonProcess = function () {
    /**
     * Utility process to create a json like object always synchronized with the SpinalHub server.
     *
     * h3 The Model NEEDS to be synchonized with the spinalhub server.
     *
     * Usage Example:
     *
     * ```sh
     *   npm i --save spinal-process-jsonprocess
     * ```
     *
     * ```js
     * var spinalCore = require("spinal-core-connectorjs");
     *
     * var JsonProcess = require("spinal-process-jsonprocess").JsonProcess;
     * var create_JsonProcess = require("spinal-process-jsonprocess").create_JsonProcess;
     * // or for es6
     * // import { JsonProcess, create_JsonProcess } from "spinal-process-jsonprocess"
     * // or
     * // import create_JsonProcess from "spinal-process-jsonprocess"
     * // import { JsonProcess } from "spinal-process-jsonprocess"
     *
     *
     * const connect_opt = "http://168:JHGgcz45JKilmzknzelf65ddDadggftIO98P@localhost:7777/";
     *
     * var conn = spinalCore.connect(connect_opt);
     * spinalCore.load(conn, "__users__", callback_success);
     *
     * function callback_success(file) {
     *
     *   JsonProcess(file, 3, false)
     *     .then(_process => {
     *       JsonProcess.setOnLocalChange(json, (json) => {
     *         console.log("the model have a local change !", json);
     *       });
     *
     *       // carefull circular Json doesn't
     *       // work with JSON.stringify
     *       console.log(JSON.stringify(_process, null, 2));
     *     })
     *     .catch(console.error);
     *
     * };
     * ```
     * @see to create an JsonProcess instance use
     * `create_JsonProcess` or `create_JsonProcess_by_server_id`
     * @class JsonProcess
     */
    var JsonProcess = function (_G_root$Process) {
      _inherits(JsonProcess, _G_root$Process);

      /**
      * h4 /!\ **Don't use the Contructor directly but use the following static method :**
      * * `create_JsonProcess`
      * * `create_JsonProcess_by_server_id`
       */
      function JsonProcess(model, max_depth, load_ptr, depth) {
        _classCallCheck(this, JsonProcess);

        var handler, i, len, ref;

        var _this = _possibleConstructorReturn(this, (JsonProcess.__proto__ || Object.getPrototypeOf(JsonProcess)).call(this, model, false));

        _this._model = model;
        _this._depth = depth;
        _this._max_depth = max_depth;
        _this._load_ptr = load_ptr;
        _this._json = {
          _server_id: model._server_id,
          _constructor_name: model.constructor.name,
          data: null
        };
        _this.handler = null;
        ref = G_root.JsonProcess._type_handler;
        for (i = 0, len = ref.length; i < len; i++) {
          handler = ref[i];
          if (_this._model instanceof handler.modelType) {
            _this.handler = handler.handler;
            break;
          }
        }
        if (_this.handler === null) {
          // it shouldn't happend
          throw new Error("jsonProcess, imposible to find an handle for " + _this._model.constructor.name);
        }
        _this._onChange = [];
        _this._onLocalChange = [];
        _this._onChildChange = [];
        // wait rdy
        _this._is_rdy = _this._update();
        return _this;
      }

      /**
      * Static Method to create a JsonProcess
      * @param model [Model] SpinalCore model to follow
      * @param max_depth [Number = null] the max depth default is depth + 2; if -1 All Children are loaded
      * @param load_ptr [Bool = false] to load or not the ptr
      * @param depth [Number = 0] current depth default at 0
      * @returns [Promise] the `_json` attribute is returned when resolved
       */


      _createClass(JsonProcess, [{
        key: "_update",
        value: function _update() {
          if (this._max_depth !== -1 && this._max_depth < this._depth) {
            return Promise.resolve({
              _server_id: this._json._server_id,
              _constructor_name: this._model.constructor.name
            });
          }
          return this.handler.call(this);
        }

        /**
        * Register a custom handler, check [Lst](/src/ModelHandler/Lst.coffee)
        * or [Model](/src/ModelHandler/Model.coffee) handler
        * @param {Object} handler the handler
        *
        *```js
        * // example for Obj
        * {
        *   modelType: G_root.Obj, // [Model] The declaration of the Model
        *   modelName: "Obj", // [String] The constructor name of the Model
        *   prority: 1, // [Number] the defaut handler executed is the one with the highiest priority
        *
        *   // [Function] The handler itself return a promise with the _json in the resolve
        *   handler: function() {
        *     this._json.data = this._model._data
        *     return Promise.resolve(this._json)
        *     }
        * }
        *```   */

      }, {
        key: "onchange",
        value: function onchange() {
          var _this2 = this;

          // _update json
          if (this._model.has_been_directly_modified()) {
            return this._update().then(function () {
              G_root.JsonProcess._callbackInArray(_this2._onLocalChange, _this2._json);
              return G_root.JsonProcess._callbackInArray(_this2._onChange, _this2._json);
            });
          } else {
            G_root.JsonProcess._callbackInArray(this._onChildChange, this._json);
            return G_root.JsonProcess._callbackInArray(this._onChange, this._json);
          }
        }
      }], [{
        key: "create_JsonProcess",
        value: function create_JsonProcess(model) {
          var max_depth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
          var load_ptr = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
          var depth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;

          depth += 1;
          if (!max_depth) {
            max_depth = depth + 2;
          }
          // wait model rdy
          return G_root.JsonProcess._wait_model_sync_server(model).then(function () {
            if (typeof G_root.JsonProcess._getJsonProcess(model) === "undefined") {
              G_root.JsonProcess._JsonProcess[model._server_id] = new G_root.JsonProcess(model, max_depth, load_ptr, depth);
            }
            return G_root.JsonProcess._getJsonProcess(model)._is_rdy;
          });
        }

        /**
        * Static Method to create a JsonProcess
        * @param server_id [Number] SpinalCore model to follow
        * @param max_depth [Number = null] the max depth default is depth + 2; if -1 All Children are loaded
        * @param load_ptr [Bool = false] to load or not the ptr
        * @param depth [Number = 0] current depth default at 0
        * @returns [Promise] the `_json` attribute is returned when resolved
         */

      }, {
        key: "create_JsonProcess_by_server_id",
        value: function create_JsonProcess_by_server_id(server_id, max_depth, load_ptr, depth) {
          return G_root.JsonProcess.create_JsonProcess(FileSystem._objects[server_id], _max_depth, load_ptr, depth);
        }

        /**
        * Add a callback to call on Model change (itself and child)
        * @param {Obj} json the Json or a child obtained via create_JsonProcess MUST have a `_server_id`
        * @param {Function} cb the function to be called
        * @returns {Function} call it to unregister the callback
        * @api private
         */

      }, {
        key: "setOnChange",
        value: function setOnChange(json, cb) {
          var targetJsonProcess;
          targetJsonProcess = G_root.JsonProcess._getJsonProcess(json);
          return G_root.JsonProcess._registerCallback(targetJsonProcess._onChange, cb);
        }

        /**
        * Add a callback to call on Model change (itself only)
        * @param {Obj} json the Json or a child obtained via create_JsonProcess MUST have a `_server_id`
        * @param {Function} cb the function to be called
        * @returns {Function} call it to unregister the callback
         */

      }, {
        key: "setOnLocalChange",
        value: function setOnLocalChange(json, cb) {
          var targetJsonProcess;
          targetJsonProcess = G_root.JsonProcess._getJsonProcess(json);
          return G_root.JsonProcess._registerCallback(targetJsonProcess._onLocalChange, cb);
        }

        /**
        * Add a callback to call on Model change (child only)
        * @param {Obj} json the Json or a child obtained via create_JsonProcess MUST have a `_server_id`
        * @param {Function} cb the function to be called
        * @returns {Function} call it to unregister the callback
         */

      }, {
        key: "setOnChildChange",
        value: function setOnChildChange(json, cb) {
          var targetJsonProcess;
          targetJsonProcess = G_root.JsonProcess._getJsonProcess(json);
          return G_root.JsonProcess._registerCallback(targetJsonProcess._onChildChange, cb);
        }

        /**
        * gets back the real model
        * @param {Obj} json the Json or a child obtained via create_JsonProcess MUST have a `_server_id`
        * @returns {Function} call it to unregister the callback
         */

      }, {
        key: "getModel",
        value: function getModel(json) {
          var targetJsonProcess;
          targetJsonProcess = G_root.JsonProcess._getJsonProcess(json);
          return targetJsonProcess._model;
        }

        /**
        * add to the max_depth and it's child
        * @param {Obj} json the Json or a child obtained via create_JsonProcess MUST have a `_server_id`
        * @param {Number} new max_dapth to add in children
        * @returns {Function} call it to unregister the callback
         */

      }, {
        key: "addDepth",
        value: function addDepth(json, depth_to_add) {
          var targetJsonProcess;
          if (!depth_to_add || depth_to_add < 0) {
            return Promise.reject(new Error("JsonProcess.addDepth param [depth_to_add] must be > 0"));
          }
          targetJsonProcess = G_root.JsonProcess._getJsonProcess(json);
          targetJsonProcess._max_depth += depth_to_add;
          targetJsonProcess._is_rdy = targetJsonProcess._update.call(targetJsonProcess).then(function (_json) {
            var handler, i, len, ref;
            ref = G_root.JsonProcess._type_handler;
            for (i = 0, len = ref.length; i < len; i++) {
              handler = ref[i];
              if (targetJsonProcess._model instanceof handler.modelType && typeof handler.set_children_depth_handler === 'function') {
                return handler.set_children_depth_handler(_json, targetJsonProcess._max_depth);
              }
            }
          });
          return targetJsonProcess._is_rdy;
        }
      }, {
        key: "_getJsonProcess",
        value: function _getJsonProcess(obj) {
          if (obj && obj._server_id) {
            return G_root.JsonProcess._JsonProcess[obj._server_id];
          }
          throw new Error("_getJsonProcess param must have a '_server_id' attribute");
        }
      }, {
        key: "registerHandler",
        value: function registerHandler(handler) {
          G_root.JsonProcess._check_handler_params(handler);
          G_root.JsonProcess._type_handler.push(handler);
          return G_root.JsonProcess._type_handler.sort(G_root.JsonProcess._register_sort);
        }
      }, {
        key: "_check_handler_params",
        value: function _check_handler_params(handler) {
          var err, i, len, param, param_to_check;
          param_to_check = [{
            attr_name: "modelType",
            expected_type: "function"
          }, {
            attr_name: "modelName",
            expected_type: "string"
          }, {
            attr_name: "prority",
            expected_type: "number"
          }, {
            attr_name: "handler",
            expected_type: "function"
          }];
          err = "";
          if ((typeof handler === "undefined" ? "undefined" : _typeof(handler)) !== 'object') {
            throw new Error("JsonProcess.registerHandler parameter must be an object");
          }
          for (i = 0, len = param_to_check.length; i < len; i++) {
            param = param_to_check[i];
            if (_typeof(handler[param.attr_name]) !== param.expected_type) {
              err += "JsonProcess.registerHandler parameter [" + param.attr_name;
              err += "] must be a " + param.expected_type + "\n";
            }
          }
          if (err !== "") {
            throw new Error(err);
          }
        }
      }, {
        key: "_register_sort",
        value: function _register_sort(a, b) {
          return b.prority - a.prority;
        }
      }, {
        key: "_assignWithKey",
        value: function _assignWithKey(_data, model_key, _model) {
          return G_root.JsonProcess._assignWithModel.call(this, _data, model_key, _model[model_key]);
        }
      }, {
        key: "_assignWithModel",
        value: function _assignWithModel(_data, model_key, _model) {
          return G_root.JsonProcess.create_JsonProcess(_model, this._max_depth, this._load_ptr, this._depth).then(function (child) {
            _data[model_key] = child;
            return _data;
          });
        }
      }, {
        key: "_assignPush",
        value: function _assignPush(_json, _model) {
          return G_root.JsonProcess.create_JsonProcess(_model, this._max_depth, this._load_ptr, this._depth).then(function (child) {
            _json.data.push(child);
            return _json;
          });
        }
      }, {
        key: "_callbackInArray",
        value: function _callbackInArray(arr, json) {
          var i, len, obj, results;
          results = [];
          for (i = 0, len = arr.length; i < len; i++) {
            obj = arr[i];
            results.push(obj.func(json));
          }
          return results;
        }
      }, {
        key: "_registerCallback",
        value: function _registerCallback(arr, cb) {
          var obj;
          obj = {
            id: G_root.JsonProcess._registerID++,
            func: cb
          };
          return function () {
            var idx;
            idx = arr.indexOf(obj);
            if (idx !== -1) {
              return arr.splice(idx, 1);
            }
          };
        }
      }, {
        key: "_wait_model_sync_server_loop",
        value: function _wait_model_sync_server_loop(model, resolve) {
          if (typeof model._server_id === 'undefined' || typeof FileSystem._tmp_objects[model._server_id] !== 'undefined' || typeof FileSystem._objects[model._server_id] === 'undefined') {
            return setTimeout(function () {
              return G_root.JsonProcess._wait_model_sync_server_loop(model, resolve);
            }, 200);
          } else {
            return resolve();
          }
        }
      }, {
        key: "_wait_model_sync_server",
        value: function _wait_model_sync_server(model) {
          return new Promise(function (resolve) {
            return G_root.JsonProcess._wait_model_sync_server_loop(model, resolve);
          });
        }
      }]);

      return JsonProcess;
    }(G_root.Process);

    ;

    JsonProcess._type_handler = [];

    JsonProcess._JsonProcess = [];

    JsonProcess._registerID = 0;

    return JsonProcess;
  }.call(this);

  module.exports = {
    JsonProcess: JsonProcess,
    create_JsonProcess: JsonProcess.create_JsonProcess,
    default: JsonProcess.create_JsonProcess
  };
}).call(undefined);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qc29uUHJvY2Vzcy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLENBQUEsWUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQSxNQUFBOztBQXdCQSxXQUFZLE9BQUEsTUFBQSxLQUFILFdBQUcsR0FBSCxNQUFHLEdBQThDLE1BQTFEOztBQUNBLFVBQUEseUJBQUE7O0FBa0RNLFNBQU8sV0FBUCxHQUFPLFlBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxRQUFiLFdBQWE7QUFBQTs7Ozs7OztBQVVYLDJCQUFhLEtBQWIsRUFBYSxTQUFiLEVBQWEsUUFBYixFQUFhLEtBQWIsRUFBYTtBQUFBOztBQUNYLFlBQUEsT0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQTs7QUFEVyw4SEFDWCxLQURXLEVBQ1gsS0FEVzs7QUFFWCxjQUFBLE1BQUEsR0FBVSxLQUFWO0FBQ0EsY0FBQSxNQUFBLEdBQVUsS0FBVjtBQUNBLGNBQUEsVUFBQSxHQUFjLFNBQWQ7QUFDQSxjQUFBLFNBQUEsR0FBYSxRQUFiO0FBQ0EsY0FBQSxLQUFBLEdBQVM7QUFDUCxzQkFBWSxNQURMLFVBQUE7QUFFUCw2QkFBbUIsTUFBTSxXQUFOLENBRlosSUFBQTtBQUdQLGdCQUFNO0FBSEMsU0FBVDtBQUtBLGNBQUEsT0FBQSxHQUFXLElBQVg7QUFDQSxjQUFBLE9BQUEsV0FBQSxDQUFBLGFBQUE7QUFBQSxhQUFBLElBQUEsQ0FBQSxFQUFBLE1BQUEsSUFBQSxNQUFBLEVBQUEsSUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBOztBQUNFLGNBQUksTUFBQSxNQUFBLFlBQW1CLFFBQXZCLFNBQUEsRUFBQTtBQUNFLGtCQUFBLE9BQUEsR0FBVyxRQUFRLE9BQW5CO0FBREY7O0FBREY7QUFJQSxZQUFJLE1BQUEsT0FBQSxLQUFKLElBQUEsRUFBQTs7QUFFRSxnQkFBTSxJQUFB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LEdBR0UsQztBQUhGLFdBQUEsTUFBQTttQkFBQSxTOztBQUQ2QjtBQTNPcEI7QUFBQTtBQUFBLGdEQXFQZSxLQXJQZixFQXFQZTtBQUN4QixpQkFBTyxJQUFBLE9BQUEsQ0FBWSxVQUFBLE9BQUEsRUFBQTttQkFDakIsT0FBTyxXQUFQLENBQUEsNEJBQUEsQ0FBQSxLQUFBLEVBQUEsT0FBQSxDO0FBREssV0FBQSxDQUFQO0FBRHdCO0FBclBmOztBQUFBO0FBQUEsTUFBb0IsT0FBakMsT0FBYTs7QUFBYjs7QUFDRSxnQkFBQSxhQUFBLEdBQWdCLEVBQWhCOztBQUNBLGdCQUFBLFlBQUEsR0FBZSxFQUFmOztBQUNBLGdCQUFBLFdBQUEsR0FBYyxDQUFkOzs7R0FIVyxDLElBQUEsQyxJQUFBLENBQVA7O0FBMlBOLFNBQUEsT0FBQSxHQUFpQjtBQUFBLDRCQUFBO0FBRWYsd0JBQW9CLFlBRkwsa0JBQUE7QUFHZixhQUFTLFlBQVk7QUFITixHQUFqQjtDQXRVQSxFLElBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIjIENvcHlyaWdodCAyMDE1IFNwaW5hbENvbSAtIHd3dy5zcGluYWxjb20uY29tXG4jXG4jIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIFNwaW5hbENvcmUuXG4jXG4jIFBsZWFzZSByZWFkIGFsbCBvZiB0aGUgZm9sbG93aW5nIHRlcm1zIGFuZCBjb25kaXRpb25zXG4jIG9mIHRoZSBGcmVlIFNvZnR3YXJlIGxpY2Vuc2UgQWdyZWVtZW50IChcIkFncmVlbWVudFwiKVxuIyBjYXJlZnVsbHkuXG4jXG4jIFRoaXMgQWdyZWVtZW50IGlzIGEgbGVnYWxseSBiaW5kaW5nIGNvbnRyYWN0IGJldHdlZW5cbiMgdGhlIExpY2Vuc2VlIChhcyBkZWZpbmVkIGJlbG93KSBhbmQgU3BpbmFsQ29tIHRoYXRcbiMgc2V0cyBmb3J0aCB0aGUgdGVybXMgYW5kIGNvbmRpdGlvbnMgdGhhdCBnb3Zlcm4geW91clxuIyB1c2Ugb2YgdGhlIFByb2dyYW0uIEJ5IGluc3RhbGxpbmcgYW5kL29yIHVzaW5nIHRoZVxuIyBQcm9ncmFtLCB5b3UgYWdyZWUgdG8gYWJpZGUgYnkgYWxsIHRoZSB0ZXJtcyBhbmRcbiMgY29uZGl0aW9ucyBzdGF0ZWQgb3IgcmVmZXJlbmNlZCBoZXJlaW4uXG4jXG4jIElmIHlvdSBkbyBub3QgYWdyZWUgdG8gYWJpZGUgYnkgdGhlc2UgdGVybXMgYW5kXG4jIGNvbmRpdGlvbnMsIGRvIG5vdCBkZW1vbnN0cmF0ZSB5b3VyIGFjY2VwdGFuY2UgYW5kIGRvXG4jIG5vdCBpbnN0YWxsIG9yIHVzZSB0aGUgUHJvZ3JhbS5cbiNcbiMgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgbGljZW5zZSBhbG9uZ1xuIyB3aXRoIHRoaXMgZmlsZS4gSWYgbm90LCBzZWVcbiMgPGh0dHA6Ly9yZXNvdXJjZXMuc3BpbmFsY29tLmNvbS9saWNlbnNlcy5wZGY+LlxuXG5cbkdfcm9vdCA9IGlmIHR5cGVvZiB3aW5kb3cgPT0gXCJ1bmRlZmluZWRcIiB0aGVuIGdsb2JhbCBlbHNlIHdpbmRvd1xucmVxdWlyZShcInNwaW5hbC1jb3JlLWNvbm5lY3RvcmpzXCIpXG5cbiMjIypcbiAqIFV0aWxpdHkgcHJvY2VzcyB0byBjcmVhdGUgYSBqc29uIGxpa2Ugb2JqZWN0IGFsd2F5cyBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgU3BpbmFsSHViIHNlcnZlci5cbiAqXG4gKiBoMyBUaGUgTW9kZWwgTkVFRFMgdG8gYmUgc3luY2hvbml6ZWQgd2l0aCB0aGUgc3BpbmFsaHViIHNlcnZlci5cbiAqXG4gKiBVc2FnZSBFeGFtcGxlOlxuICpcbiAqIGBgYHNoXG4gKiAgIG5wbSBpIC0tc2F2ZSBzcGluYWwtcHJvY2Vzcy1qc29ucHJvY2Vzc1xuICogYGBgXG4gKlxuICogYGBganNcbiAqIHZhciBzcGluYWxDb3JlID0gcmVxdWlyZShcInNwaW5hbC1jb3JlLWNvbm5lY3RvcmpzXCIpO1xuICpcbiAqIHZhciBKc29uUHJvY2VzcyA9IHJlcXVpcmUoXCJzcGluYWwtcHJvY2Vzcy1qc29ucHJvY2Vzc1wiKS5Kc29uUHJvY2VzcztcbiAqIHZhciBjcmVhdGVfSnNvblByb2Nlc3MgPSByZXF1aXJlKFwic3BpbmFsLXByb2Nlc3MtanNvbnByb2Nlc3NcIikuY3JlYXRlX0pzb25Qcm9jZXNzO1xuICogLy8gb3IgZm9yIGVzNlxuICogLy8gaW1wb3J0IHsgSnNvblByb2Nlc3MsIGNyZWF0ZV9Kc29uUHJvY2VzcyB9IGZyb20gXCJzcGluYWwtcHJvY2Vzcy1qc29ucHJvY2Vzc1wiXG4gKiAvLyBvclxuICogLy8gaW1wb3J0IGNyZWF0ZV9Kc29uUHJvY2VzcyBmcm9tIFwic3BpbmFsLXByb2Nlc3MtanNvbnByb2Nlc3NcIlxuICogLy8gaW1wb3J0IHsgSnNvblByb2Nlc3MgfSBmcm9tIFwic3BpbmFsLXByb2Nlc3MtanNvbnByb2Nlc3NcIlxuICpcbiAqXG4gKiBjb25zdCBjb25uZWN0X29wdCA9IFwiaHR0cDovLzE2ODpKSEdnY3o0NUpLaWxtemtuemVsZjY1ZGREYWRnZ2Z0SU85OFBAbG9jYWxob3N0Ojc3NzcvXCI7XG4gKlxuICogdmFyIGNvbm4gPSBzcGluYWxDb3JlLmNvbm5lY3QoY29ubmVjdF9vcHQpO1xuICogc3BpbmFsQ29yZS5sb2FkKGNvbm4sIFwiX191c2Vyc19fXCIsIGNhbGxiYWNrX3N1Y2Nlc3MpO1xuICpcbiAqIGZ1bmN0aW9uIGNhbGxiYWNrX3N1Y2Nlc3MoZmlsZSkge1xuICpcbiAqICAgSnNvblByb2Nlc3MoZmlsZSwgMywgZmFsc2UpXG4gKiAgICAgLnRoZW4oX3Byb2Nlc3MgPT4ge1xuICogICAgICAgSnNvblByb2Nlc3Muc2V0T25Mb2NhbENoYW5nZShqc29uLCAoanNvbikgPT4ge1xuICogICAgICAgICBjb25zb2xlLmxvZyhcInRoZSBtb2RlbCBoYXZlIGEgbG9jYWwgY2hhbmdlICFcIiwganNvbik7XG4gKiAgICAgICB9KTtcbiAqXG4gKiAgICAgICAvLyBjYXJlZnVsbCBjaXJjdWxhciBKc29uIGRvZXNuJ3RcbiAqICAgICAgIC8vIHdvcmsgd2l0aCBKU09OLnN0cmluZ2lmeVxuICogICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoX3Byb2Nlc3MsIG51bGwsIDIpKTtcbiAqICAgICB9KVxuICogICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAqXG4gKiB9O1xuICogYGBgXG4gKiBAc2VlIHRvIGNyZWF0ZSBhbiBKc29uUHJvY2VzcyBpbnN0YW5jZSB1c2VcbiAqIGBjcmVhdGVfSnNvblByb2Nlc3NgIG9yIGBjcmVhdGVfSnNvblByb2Nlc3NfYnlfc2VydmVyX2lkYFxuICogQGNsYXNzIEpzb25Qcm9jZXNzXG4jIyNcbmNsYXNzIEdfcm9vdC5Kc29uUHJvY2VzcyBleHRlbmRzIEdfcm9vdC5Qcm9jZXNzXG4gIEBfdHlwZV9oYW5kbGVyOiBbXVxuICBAX0pzb25Qcm9jZXNzOiBbXVxuICBAX3JlZ2lzdGVySUQ6IDBcblxuICAjIyMqXG4gICogaDQgLyFcXCAqKkRvbid0IHVzZSB0aGUgQ29udHJ1Y3RvciBkaXJlY3RseSBidXQgdXNlIHRoZSBmb2xsb3dpbmcgc3RhdGljIG1ldGhvZCA6KipcbiAgKiAqIGBjcmVhdGVfSnNvblByb2Nlc3NgXG4gICogKiBgY3JlYXRlX0pzb25Qcm9jZXNzX2J5X3NlcnZlcl9pZGBcbiAgIyMjXG4gIGNvbnN0cnVjdG9yOiAobW9kZWwsIG1heF9kZXB0aCwgbG9hZF9wdHIsIGRlcHRoKSAtPlxuICAgIHN1cGVyIG1vZGVsLCBmYWxzZVxuICAgIEBfbW9kZWwgPSBtb2RlbFxuICAgIEBfZGVwdGggPSBkZXB0aFxuICAgIEBfbWF4X2RlcHRoID0gbWF4X2RlcHRoXG4gICAgQF9sb2FkX3B0ciA9IGxvYWRfcHRyXG4gICAgQF9qc29uID0ge1xuICAgICAgX3NlcnZlcl9pZDogbW9kZWwuX3NlcnZlcl9pZFxuICAgICAgX2NvbnN0cnVjdG9yX25hbWU6IG1vZGVsLmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICBkYXRhOiBudWxsXG4gICAgfVxuICAgIEBoYW5kbGVyID0gbnVsbFxuICAgIGZvciBoYW5kbGVyIGluIEdfcm9vdC5Kc29uUHJvY2Vzcy5fdHlwZV9oYW5kbGVyXG4gICAgICBpZiAoQF9tb2RlbCBpbnN0YW5jZW9mIGhhbmRsZXIubW9kZWxUeXBlKVxuICAgICAgICBAaGFuZGxlciA9IGhhbmRsZXIuaGFuZGxlclxuICAgICAgICBicmVha1xuICAgIGlmIChAaGFuZGxlciA9PSBudWxsKVxuICAgICAgIyBpdCBzaG91bGRuJ3QgaGFwcGVuZFxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwianNvblByb2Nlc3MsIGltcG9zaWJsZSB0byBmaW5kIGFuIGhhbmRsZSBmb3IgI3tAX21vZGVsLmNvbnN0cnVjdG9yLm5hbWV9XCIpXG5cbiAgICBAX29uQ2hhbmdlID0gW11cbiAgICBAX29uTG9jYWxDaGFuZ2UgPSBbXVxuICAgIEBfb25DaGlsZENoYW5nZSA9IFtdXG5cbiAgICAjIHdhaXQgcmR5XG4gICAgQF9pc19yZHkgPSBAX3VwZGF0ZSgpXG5cbiAgIyMjKlxuICAqIFN0YXRpYyBNZXRob2QgdG8gY3JlYXRlIGEgSnNvblByb2Nlc3NcbiAgKiBAcGFyYW0gbW9kZWwgW01vZGVsXSBTcGluYWxDb3JlIG1vZGVsIHRvIGZvbGxvd1xuICAqIEBwYXJhbSBtYXhfZGVwdGggW051bWJlciA9IG51bGxdIHRoZSBtYXggZGVwdGggZGVmYXVsdCBpcyBkZXB0aCArIDI7IGlmIC0xIEFsbCBDaGlsZHJlbiBhcmUgbG9hZGVkXG4gICogQHBhcmFtIGxvYWRfcHRyIFtCb29sID0gZmFsc2VdIHRvIGxvYWQgb3Igbm90IHRoZSBwdHJcbiAgKiBAcGFyYW0gZGVwdGggW051bWJlciA9IDBdIGN1cnJlbnQgZGVwdGggZGVmYXVsdCBhdCAwXG4gICogQHJldHVybnMgW1Byb21pc2VdIHRoZSBgX2pzb25gIGF0dHJpYnV0ZSBpcyByZXR1cm5lZCB3aGVuIHJlc29sdmVkXG4gICMjI1xuICBAY3JlYXRlX0pzb25Qcm9jZXNzOiAobW9kZWwsIG1heF9kZXB0aCA9IG51bGwsIGxvYWRfcHRyID0gZmFsc2UsIGRlcHRoID0gMCkgLT5cbiAgICBkZXB0aCArPSAxXG4gICAgaWYgbm90IG1heF9kZXB0aFxuICAgICAgbWF4X2RlcHRoID0gZGVwdGggKyAyXG4gICAgIyB3YWl0IG1vZGVsIHJkeVxuICAgIHJldHVybiBHX3Jvb3QuSnNvblByb2Nlc3MuX3dhaXRfbW9kZWxfc3luY19zZXJ2ZXIobW9kZWwpLnRoZW4oKCkgLT5cbiAgICAgIGlmICh0eXBlb2YgR19yb290Lkpzb25Qcm9jZXNzLl9nZXRKc29uUHJvY2Vzcyhtb2RlbCkgaXMgXCJ1bmRlZmluZWRcIilcbiAgICAgICAgR19yb290Lkpzb25Qcm9jZXNzLl9Kc29uUHJvY2Vzc1ttb2RlbC5fc2VydmVyX2lkXSA9XG4gICAgICAgICAgbmV3IEdfcm9vdC5Kc29uUHJvY2Vzcyhtb2RlbCwgbWF4X2RlcHRoLCBsb2FkX3B0ciwgZGVwdGgpXG4gICAgICByZXR1cm4gR19yb290Lkpzb25Qcm9jZXNzLl9nZXRKc29uUHJvY2Vzcyhtb2RlbCkuX2lzX3JkeVxuICAgIClcblxuICAjIyMqXG4gICogU3RhdGljIE1ldGhvZCB0byBjcmVhdGUgYSBKc29uUHJvY2Vzc1xuICAqIEBwYXJhbSBzZXJ2ZXJfaWQgW051bWJlcl0gU3BpbmFsQ29yZSBtb2RlbCB0byBmb2xsb3dcbiAgKiBAcGFyYW0gbWF4X2RlcHRoIFtOdW1iZXIgPSBudWxsXSB0aGUgbWF4IGRlcHRoIGRlZmF1bHQgaXMgZGVwdGggKyAyOyBpZiAtMSBBbGwgQ2hpbGRyZW4gYXJlIGxvYWRlZFxuICAqIEBwYXJhbSBsb2FkX3B0ciBbQm9vbCA9IGZhbHNlXSB0byBsb2FkIG9yIG5vdCB0aGUgcHRyXG4gICogQHBhcmFtIGRlcHRoIFtOdW1iZXIgPSAwXSBjdXJyZW50IGRlcHRoIGRlZmF1bHQgYXQgMFxuICAqIEByZXR1cm5zIFtQcm9taXNlXSB0aGUgYF9qc29uYCBhdHRyaWJ1dGUgaXMgcmV0dXJuZWQgd2hlbiByZXNvbHZlZFxuICAjIyNcbiAgQGNyZWF0ZV9Kc29uUHJvY2Vzc19ieV9zZXJ2ZXJfaWQ6IChzZXJ2ZXJfaWQsIG1heF9kZXB0aCwgbG9hZF9wdHIsIGRlcHRoKSAtPlxuICAgIEdfcm9vdC5Kc29uUHJvY2Vzcy5jcmVhdGVfSnNvblByb2Nlc3MoRmlsZVN5c3RlbS5fb2JqZWN0c1tzZXJ2ZXJfaWRdLCBfbWF4X2RlcHRoLFxuICAgIGxvYWRfcHRyLCBkZXB0aClcblxuICAjIyMqXG4gICogQWRkIGEgY2FsbGJhY2sgdG8gY2FsbCBvbiBNb2RlbCBjaGFuZ2UgKGl0c2VsZiBhbmQgY2hpbGQpXG4gICogQHBhcmFtIHtPYmp9IGpzb24gdGhlIEpzb24gb3IgYSBjaGlsZCBvYnRhaW5lZCB2aWEgY3JlYXRlX0pzb25Qcm9jZXNzIE1VU1QgaGF2ZSBhIGBfc2VydmVyX2lkYFxuICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIHRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWRcbiAgKiBAcmV0dXJucyB7RnVuY3Rpb259IGNhbGwgaXQgdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcbiAgKiBAYXBpIHByaXZhdGVcbiAgIyMjXG4gIEBzZXRPbkNoYW5nZTogKGpzb24sIGNiKSAtPlxuICAgIHRhcmdldEpzb25Qcm9jZXNzID0gR19yb290Lkpzb25Qcm9jZXNzLl9nZXRKc29uUHJvY2Vzcyhqc29uKVxuICAgIEdfcm9vdC5Kc29uUHJvY2Vzcy5fcmVnaXN0ZXJDYWxsYmFjayh0YXJnZXRKc29uUHJvY2Vzcy5fb25DaGFuZ2UsIGNiKVxuICAjIyMqXG4gICogQWRkIGEgY2FsbGJhY2sgdG8gY2FsbCBvbiBNb2RlbCBjaGFuZ2UgKGl0c2VsZiBvbmx5KVxuICAqIEBwYXJhbSB7T2JqfSBqc29uIHRoZSBKc29uIG9yIGEgY2hpbGQgb2J0YWluZWQgdmlhIGNyZWF0ZV9Kc29uUHJvY2VzcyBNVVNUIGhhdmUgYSBgX3NlcnZlcl9pZGBcbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiB0aGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG4gICogQHJldHVybnMge0Z1bmN0aW9ufSBjYWxsIGl0IHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXG4gICMjI1xuICBAc2V0T25Mb2NhbENoYW5nZTogKGpzb24sIGNiKSAtPlxuICAgIHRhcmdldEpzb25Qcm9jZXNzID0gR19yb290Lkpzb25Qcm9jZXNzLl9nZXRKc29uUHJvY2Vzcyhqc29uKVxuICAgIEdfcm9vdC5Kc29uUHJvY2Vzcy5fcmVnaXN0ZXJDYWxsYmFjayh0YXJnZXRKc29uUHJvY2Vzcy5fb25Mb2NhbENoYW5nZSwgY2IpXG4gICMjIypcbiAgKiBBZGQgYSBjYWxsYmFjayB0byBjYWxsIG9uIE1vZGVsIGNoYW5nZSAoY2hpbGQgb25seSlcbiAgKiBAcGFyYW0ge09ian0ganNvbiB0aGUgSnNvbiBvciBhIGNoaWxkIG9idGFpbmVkIHZpYSBjcmVhdGVfSnNvblByb2Nlc3MgTVVTVCBoYXZlIGEgYF9zZXJ2ZXJfaWRgXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgdGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZFxuICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gY2FsbCBpdCB0byB1bnJlZ2lzdGVyIHRoZSBjYWxsYmFja1xuICAjIyNcbiAgQHNldE9uQ2hpbGRDaGFuZ2U6IChqc29uLCBjYikgLT5cbiAgICB0YXJnZXRKc29uUHJvY2VzcyA9IEdfcm9vdC5Kc29uUHJvY2Vzcy5fZ2V0SnNvblByb2Nlc3MoanNvbilcbiAgICBHX3Jvb3QuSnNvblByb2Nlc3MuX3JlZ2lzdGVyQ2FsbGJhY2sodGFyZ2V0SnNvblByb2Nlc3MuX29uQ2hpbGRDaGFuZ2UsIGNiKVxuXG4gICMjIypcbiAgKiBnZXRzIGJhY2sgdGhlIHJlYWwgbW9kZWxcbiAgKiBAcGFyYW0ge09ian0ganNvbiB0aGUgSnNvbiBvciBhIGNoaWxkIG9idGFpbmVkIHZpYSBjcmVhdGVfSnNvblByb2Nlc3MgTVVTVCBoYXZlIGEgYF9zZXJ2ZXJfaWRgXG4gICogQHJldHVybnMge0Z1bmN0aW9ufSBjYWxsIGl0IHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXG4gICMjI1xuICBAZ2V0TW9kZWw6IChqc29uKSAtPlxuICAgIHRhcmdldEpzb25Qcm9jZXNzID0gR19yb290Lkpzb25Qcm9jZXNzLl9nZXRKc29uUHJvY2Vzcyhqc29uKVxuICAgIHJldHVybiB0YXJnZXRKc29uUHJvY2Vzcy5fbW9kZWxcblxuICAjIyMqXG4gICogYWRkIHRvIHRoZSBtYXhfZGVwdGggYW5kIGl0J3MgY2hpbGRcbiAgKiBAcGFyYW0ge09ian0ganNvbiB0aGUgSnNvbiBvciBhIGNoaWxkIG9idGFpbmVkIHZpYSBjcmVhdGVfSnNvblByb2Nlc3MgTVVTVCBoYXZlIGEgYF9zZXJ2ZXJfaWRgXG4gICogQHBhcmFtIHtOdW1iZXJ9IG5ldyBtYXhfZGFwdGggdG8gYWRkIGluIGNoaWxkcmVuXG4gICogQHJldHVybnMge0Z1bmN0aW9ufSBjYWxsIGl0IHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXG4gICMjI1xuICBAYWRkRGVwdGg6IChqc29uLCBkZXB0aF90b19hZGQpIC0+XG4gICAgaWYgIWRlcHRoX3RvX2FkZCBvciBkZXB0aF90b19hZGQgPCAwXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiSnNvblByb2Nlc3MuYWRkRGVwdGggcGFyYW0gW2RlcHRoX3RvX2FkZF0gbXVzdCBiZSA+IDBcIikpXG4gICAgdGFyZ2V0SnNvblByb2Nlc3MgPSBHX3Jvb3QuSnNvblByb2Nlc3MuX2dldEpzb25Qcm9jZXNzKGpzb24pXG4gICAgdGFyZ2V0SnNvblByb2Nlc3MuX21heF9kZXB0aCArPSBkZXB0aF90b19hZGRcbiAgICB0YXJnZXRKc29uUHJvY2Vzcy5faXNfcmR5ID0gdGFyZ2V0SnNvblByb2Nlc3MuX3VwZGF0ZS5jYWxsKHRhcmdldEpzb25Qcm9jZXNzKS50aGVuKFxuICAgICAgKF9qc29uKSAtPlxuICAgICAgICBmb3IgaGFuZGxlciBpbiBHX3Jvb3QuSnNvblByb2Nlc3MuX3R5cGVfaGFuZGxlclxuICAgICAgICAgIGlmICh0YXJnZXRKc29uUHJvY2Vzcy5fbW9kZWwgaW5zdGFuY2VvZiBoYW5kbGVyLm1vZGVsVHlwZSBhbmRcbiAgICAgICAgICB0eXBlb2YgaGFuZGxlci5zZXRfY2hpbGRyZW5fZGVwdGhfaGFuZGxlciA9PSAnZnVuY3Rpb24nXG4gICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXIuc2V0X2NoaWxkcmVuX2RlcHRoX2hhbmRsZXIoX2pzb24sIHRhcmdldEpzb25Qcm9jZXNzLl9tYXhfZGVwdGgpXG5cbiAgICApXG4gICAgdGFyZ2V0SnNvblByb2Nlc3MuX2lzX3JkeVxuXG4gIEBfZ2V0SnNvblByb2Nlc3M6IChvYmopIC0+XG4gICAgaWYgb2JqICYmIG9iai5fc2VydmVyX2lkXG4gICAgICByZXR1cm4gR19yb290Lkpzb25Qcm9jZXNzLl9Kc29uUHJvY2Vzc1tvYmouX3NlcnZlcl9pZF1cbiAgICB0aHJvdyBuZXcgRXJyb3IgKFwiX2dldEpzb25Qcm9jZXNzIHBhcmFtIG11c3QgaGF2ZSBhICdfc2VydmVyX2lkJyBhdHRyaWJ1dGVcIilcblxuICBfdXBkYXRlOiAtPlxuICAgIGlmIChAX21heF9kZXB0aCAhPSAtMSAmJiBAX21heF9kZXB0aCA8IEBfZGVwdGgpXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgX3NlcnZlcl9pZDogQF9qc29uLl9zZXJ2ZXJfaWRcbiAgICAgICAgX2NvbnN0cnVjdG9yX25hbWU6IEBfbW9kZWwuY29uc3RydWN0b3IubmFtZSxcbiAgICAgIH0pXG4gICAgcmV0dXJuIEBoYW5kbGVyLmNhbGwoQClcblxuXG5cbiAgIyMjKlxuICAqIFJlZ2lzdGVyIGEgY3VzdG9tIGhhbmRsZXIsIGNoZWNrIFtMc3RdKC9zcmMvTW9kZWxIYW5kbGVyL0xzdC5jb2ZmZWUpXG4gICogb3IgW01vZGVsXSgvc3JjL01vZGVsSGFuZGxlci9Nb2RlbC5jb2ZmZWUpIGhhbmRsZXJcbiAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlciB0aGUgaGFuZGxlclxuICAqXG4gICpgYGBqc1xuICAqIC8vIGV4YW1wbGUgZm9yIE9ialxuICAqIHtcbiAgKiAgIG1vZGVsVHlwZTogR19yb290Lk9iaiwgLy8gW01vZGVsXSBUaGUgZGVjbGFyYXRpb24gb2YgdGhlIE1vZGVsXG4gICogICBtb2RlbE5hbWU6IFwiT2JqXCIsIC8vIFtTdHJpbmddIFRoZSBjb25zdHJ1Y3RvciBuYW1lIG9mIHRoZSBNb2RlbFxuICAqICAgcHJvcml0eTogMSwgLy8gW051bWJlcl0gdGhlIGRlZmF1dCBoYW5kbGVyIGV4ZWN1dGVkIGlzIHRoZSBvbmUgd2l0aCB0aGUgaGlnaGllc3QgcHJpb3JpdHlcbiAgKlxuICAqICAgLy8gW0Z1bmN0aW9uXSBUaGUgaGFuZGxlciBpdHNlbGYgcmV0dXJuIGEgcHJvbWlzZSB3aXRoIHRoZSBfanNvbiBpbiB0aGUgcmVzb2x2ZVxuICAqICAgaGFuZGxlcjogZnVuY3Rpb24oKSB7XG4gICogICAgIHRoaXMuX2pzb24uZGF0YSA9IHRoaXMuX21vZGVsLl9kYXRhXG4gICogICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fanNvbilcbiAgKiAgICAgfVxuICAqIH1cbiAgKmBgYCAgIyMjXG4gIEByZWdpc3RlckhhbmRsZXI6IChoYW5kbGVyKSAtPlxuICAgIEdfcm9vdC5Kc29uUHJvY2Vzcy5fY2hlY2tfaGFuZGxlcl9wYXJhbXMoaGFuZGxlcilcbiAgICBHX3Jvb3QuSnNvblByb2Nlc3MuX3R5cGVfaGFuZGxlci5wdXNoKGhhbmRsZXIpXG4gICAgR19yb290Lkpzb25Qcm9jZXNzLl90eXBlX2hhbmRsZXIuc29ydChHX3Jvb3QuSnNvblByb2Nlc3MuX3JlZ2lzdGVyX3NvcnQpXG5cbiAgQF9jaGVja19oYW5kbGVyX3BhcmFtczogKGhhbmRsZXIpIC0+XG4gICAgcGFyYW1fdG9fY2hlY2sgPSBbXG4gICAgICB7IGF0dHJfbmFtZTogXCJtb2RlbFR5cGVcIiwgZXhwZWN0ZWRfdHlwZTogXCJmdW5jdGlvblwiIH0sXG4gICAgICB7IGF0dHJfbmFtZTogXCJtb2RlbE5hbWVcIiwgZXhwZWN0ZWRfdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgICAgeyBhdHRyX25hbWU6IFwicHJvcml0eVwiLCBleHBlY3RlZF90eXBlOiBcIm51bWJlclwiIH0sXG4gICAgICB7IGF0dHJfbmFtZTogXCJoYW5kbGVyXCIsIGV4cGVjdGVkX3R5cGU6IFwiZnVuY3Rpb25cIiB9XG4gICAgXVxuICAgIGVyciA9IFwiXCJcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT0gJ29iamVjdCcpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgKFwiSnNvblByb2Nlc3MucmVnaXN0ZXJIYW5kbGVyIHBhcmFtZXRlciBtdXN0IGJlIGFuIG9iamVjdFwiKVxuXG4gICAgZm9yIHBhcmFtIGluIHBhcmFtX3RvX2NoZWNrXG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXJbcGFyYW0uYXR0cl9uYW1lXSAhPSBwYXJhbS5leHBlY3RlZF90eXBlKVxuICAgICAgICBlcnIgKz0gXCJKc29uUHJvY2Vzcy5yZWdpc3RlckhhbmRsZXIgcGFyYW1ldGVyIFsje3BhcmFtLmF0dHJfbmFtZX1cIlxuICAgICAgICBlcnIgKz0gXCJdIG11c3QgYmUgYSAje3BhcmFtLmV4cGVjdGVkX3R5cGV9XFxuXCJcbiAgICBpZiAoZXJyICE9IFwiXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyKVxuXG4gIEBfcmVnaXN0ZXJfc29ydDogKGEsIGIpIC0+XG4gICAgcmV0dXJuIGIucHJvcml0eSAtIGEucHJvcml0eVxuXG4gIEBfYXNzaWduV2l0aEtleTogKF9kYXRhLCBtb2RlbF9rZXksIF9tb2RlbCkgLT5cbiAgICByZXR1cm4gR19yb290Lkpzb25Qcm9jZXNzLl9hc3NpZ25XaXRoTW9kZWwuY2FsbChALCBfZGF0YSwgbW9kZWxfa2V5LCBfbW9kZWxbbW9kZWxfa2V5XSlcbiAgQF9hc3NpZ25XaXRoTW9kZWw6IChfZGF0YSwgbW9kZWxfa2V5LCBfbW9kZWwpIC0+XG4gICAgcmV0dXJuIEdfcm9vdC5Kc29uUHJvY2Vzc1xuICAgICAgLmNyZWF0ZV9Kc29uUHJvY2VzcyhfbW9kZWwsIEBfbWF4X2RlcHRoLFxuICAgICAgQF9sb2FkX3B0ciwgQF9kZXB0aCkudGhlbihcbiAgICAgICAgKGNoaWxkKSAtPlxuICAgICAgICAgIF9kYXRhW21vZGVsX2tleV0gPSBjaGlsZFxuICAgICAgICAgIHJldHVybiBfZGF0YVxuICAgICAgKVxuXG4gIEBfYXNzaWduUHVzaDogKF9qc29uLCBfbW9kZWwpIC0+XG4gICAgcmV0dXJuIEdfcm9vdC5Kc29uUHJvY2Vzc1xuICAgICAgLmNyZWF0ZV9Kc29uUHJvY2VzcyhfbW9kZWwsIEBfbWF4X2RlcHRoLFxuICAgICAgQF9sb2FkX3B0ciwgQF9kZXB0aClcbiAgICAgIC50aGVuKFxuICAgICAgICAoY2hpbGQpIC0+XG4gICAgICAgICAgX2pzb24uZGF0YS5wdXNoKGNoaWxkKVxuICAgICAgICAgIHJldHVybiBfanNvblxuICAgICAgKVxuXG4gIG9uY2hhbmdlOiAtPlxuICAgICMgX3VwZGF0ZSBqc29uXG4gICAgaWYgKEBfbW9kZWwuaGFzX2JlZW5fZGlyZWN0bHlfbW9kaWZpZWQoKSlcbiAgICAgICAgQF91cGRhdGUoKS50aGVuKCgpID0+XG4gICAgICAgICAgR19yb290Lkpzb25Qcm9jZXNzLl9jYWxsYmFja0luQXJyYXkoQF9vbkxvY2FsQ2hhbmdlLCBAX2pzb24pXG4gICAgICAgICAgR19yb290Lkpzb25Qcm9jZXNzLl9jYWxsYmFja0luQXJyYXkoQF9vbkNoYW5nZSwgQF9qc29uKVxuICAgICAgICApXG4gICAgZWxzZVxuICAgICAgR19yb290Lkpzb25Qcm9jZXNzLl9jYWxsYmFja0luQXJyYXkoQF9vbkNoaWxkQ2hhbmdlLCBAX2pzb24pXG4gICAgICBHX3Jvb3QuSnNvblByb2Nlc3MuX2NhbGxiYWNrSW5BcnJheShAX29uQ2hhbmdlLCBAX2pzb24pXG5cbiAgQF9jYWxsYmFja0luQXJyYXk6IChhcnIsIGpzb24pIC0+XG4gICAgZm9yIG9iaiBpbiBhcnJcbiAgICAgIG9iai5mdW5jKGpzb24pXG5cbiAgQF9yZWdpc3RlckNhbGxiYWNrOiAoYXJyLCBjYikgLT5cbiAgICBvYmogPSB7XG4gICAgICBpZDogR19yb290Lkpzb25Qcm9jZXNzLl9yZWdpc3RlcklEKytcbiAgICAgIGZ1bmM6IGNiXG4gICAgfVxuICAgIHJldHVybiAoKCkgLT5cbiAgICAgIGlkeCA9IGFyci5pbmRleE9mKG9iailcbiAgICAgIGlmIGlkeCAhPSAtMVxuICAgICAgICBhcnIuc3BsaWNlKGlkeCwgMSlcbiAgICApXG4gIEBfd2FpdF9tb2RlbF9zeW5jX3NlcnZlcl9sb29wOiAobW9kZWwsIHJlc29sdmUpIC0+XG4gICAgaWYgKHR5cGVvZiBtb2RlbC5fc2VydmVyX2lkID09ICd1bmRlZmluZWQnIHx8XG4gICAgdHlwZW9mIEZpbGVTeXN0ZW0uX3RtcF9vYmplY3RzW21vZGVsLl9zZXJ2ZXJfaWRdICE9ICd1bmRlZmluZWQnIHx8XG4gICAgdHlwZW9mIEZpbGVTeXN0ZW0uX29iamVjdHNbbW9kZWwuX3NlcnZlcl9pZF0gPT0gJ3VuZGVmaW5lZCcpXG4gICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAoKSAtPiBHX3Jvb3QuSnNvblByb2Nlc3MuX3dhaXRfbW9kZWxfc3luY19zZXJ2ZXJfbG9vcChtb2RlbCwgcmVzb2x2ZSlcbiAgICAgICwgMjAwKVxuICAgIGVsc2VcbiAgICAgIHJlc29sdmUoKVxuXG4gIEBfd2FpdF9tb2RlbF9zeW5jX3NlcnZlcjogKG1vZGVsKSAtPlxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgLT5cbiAgICAgIEdfcm9vdC5Kc29uUHJvY2Vzcy5fd2FpdF9tb2RlbF9zeW5jX3NlcnZlcl9sb29wKG1vZGVsLCByZXNvbHZlKVxuICAgIClcblxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgSnNvblByb2Nlc3MsXG4gIGNyZWF0ZV9Kc29uUHJvY2VzczogSnNvblByb2Nlc3MuY3JlYXRlX0pzb25Qcm9jZXNzLFxuICBkZWZhdWx0OiBKc29uUHJvY2Vzcy5jcmVhdGVfSnNvblByb2Nlc3Ncbn0iXSwic291cmNlUm9vdCI6Ii4uIn0=
//# sourceURL=/home/laurent/share_to_send/modules/spinal-process-jsonprocess/src/jsonProcess.coffee